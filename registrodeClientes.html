<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prueba de knockoutjs</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.5.1/knockout-latest.js" integrity="sha512-2AL/VEauKkZqQU9BHgnv48OhXcJPx9vdzxN1JrKDVc4FPU/MEE/BZ6d9l0mP7VmvLsjtYwqiYQpDskK9dG8KBA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
        let datos = [
	{
		"cedula": "310-6815185-0",
		"nombre": "Jordan",
		"apellido": "Martinez",
		"direccion": "2597 Nulla Rd."
	},
	{
		"cedula": "299-9174919-8",
		"nombre": "Lucas",
		"apellido": "Brady",
		"direccion": "P.O. Box 490, 6562 Lectus Rd."
	},
	{
		"cedula": "235-2716041-1",
		"nombre": "Jael",
		"apellido": "Branch",
		"direccion": "870-8711 Dui. Ave"
	},
	{
		"cedula": "626-2435215-5",
		"nombre": "Tasha",
		"apellido": "Griffin",
		"direccion": "Ap #471-1012 Aliquam Av."
	},
	{
		"cedula": "988-0268712-8",
		"nombre": "Ethan",
		"apellido": "Baker",
		"direccion": "Ap #578-3602 Malesuada Avenue"
	},
	{
		"cedula": "226-9201347-9",
		"nombre": "Herrod",
		"apellido": "Pearson",
		"direccion": "2198 Sem Ave"
	},
	{
		"cedula": "267-9847578-6",
		"nombre": "Brynne",
		"apellido": "Harper",
		"direccion": "P.O. Box 621, 6432 A St."
	},
	{
		"cedula": "625-9698688-0",
		"nombre": "Gemma",
		"apellido": "Dawson",
		"direccion": "607-8676 Dapibus Street"
	},
	{
		"cedula": "900-5914943-0",
		"nombre": "Armand",
		"apellido": "Hawkins",
		"direccion": "5448 Sit St."
	},
	{
		"cedula": "595-1147506-7",
		"nombre": "Renee",
		"apellido": "Soto",
		"direccion": "Ap #442-4086 Morbi Avenue"
	},
	{
		"cedula": "276-8004500-2",
		"nombre": "Keiko",
		"apellido": "Calderon",
		"direccion": "Ap #985-3762 Neque. Av."
	},
	{
		"cedula": "202-2150098-6",
		"nombre": "Darryl",
		"apellido": "Bailey",
		"direccion": "P.O. Box 960, 8512 Nec Road"
	},
	{
		"cedula": "538-2504815-7",
		"nombre": "Keegan",
		"apellido": "Whitney",
		"direccion": "9148 Bibendum Road"
	},
	{
		"cedula": "423-8303751-8",
		"nombre": "Armando",
		"apellido": "Gardner",
		"direccion": "P.O. Box 746, 7921 Proin Av."
	},
	{
		"cedula": "784-0539117-2",
		"nombre": "Ivan",
		"apellido": "Weber",
		"direccion": "Ap #668-2203 Auctor St."
	},
	{
		"cedula": "739-8109457-3",
		"nombre": "Dora",
		"apellido": "Zamora",
		"direccion": "508-4918 Lacinia Ave"
	},
	{
		"cedula": "633-2474409-9",
		"nombre": "Lacota",
		"apellido": "Cain",
		"direccion": "Ap #636-8850 Auctor, Rd."
	},
	{
		"cedula": "918-5210943-6",
		"nombre": "Ebony",
		"apellido": "Mclean",
		"direccion": "518-4030 Suspendisse St."
	},
	{
		"cedula": "853-0185239-1",
		"nombre": "Audrey",
		"apellido": "Tran",
		"direccion": "6271 Est, St."
	},
	{
		"cedula": "931-3204717-3",
		"nombre": "Jakeem",
		"apellido": "Lee",
		"direccion": "P.O. Box 521, 5254 In St."
	},
	{
		"cedula": "108-0181098-3",
		"nombre": "Karen",
		"apellido": "Crosby",
		"direccion": "P.O. Box 337, 5451 Euismod Street"
	},
	{
		"cedula": "614-2598166-5",
		"nombre": "Berk",
		"apellido": "Farmer",
		"direccion": "P.O. Box 689, 5524 Nulla. Av."
	},
	{
		"cedula": "542-3226303-4",
		"nombre": "Madeline",
		"apellido": "Finley",
		"direccion": "7081 In, Rd."
	},
	{
		"cedula": "595-3415121-0",
		"nombre": "Dahlia",
		"apellido": "Goodwin",
		"direccion": "597-6988 Quis Street"
	},
	{
		"cedula": "399-3864940-7",
		"nombre": "Matthew",
		"apellido": "Pickett",
		"direccion": "Ap #930-1102 Nulla Avenue"
	},
	{
		"cedula": "588-6960788-9",
		"nombre": "Jamal",
		"apellido": "Hodge",
		"direccion": "490-3975 Mauris Avenue"
	},
	{
		"cedula": "738-1805297-8",
		"nombre": "Zorita",
		"apellido": "Walls",
		"direccion": "P.O. Box 553, 9707 Nec, St."
	},
	{
		"cedula": "471-5616339-7",
		"nombre": "Nita",
		"apellido": "Snow",
		"direccion": "P.O. Box 170, 4806 Nunc. St."
	},
	{
		"cedula": "536-7090997-1",
		"nombre": "Kuame",
		"apellido": "Gallagher",
		"direccion": "Ap #952-3988 Vestibulum. Street"
	},
	{
		"cedula": "186-0778647-6",
		"nombre": "Blake",
		"apellido": "Drake",
		"direccion": "895-3501 Non, Street"
	},
	{
		"cedula": "508-5504808-7",
		"nombre": "Emma",
		"apellido": "Wallace",
		"direccion": "P.O. Box 796, 9852 Tempus Avenue"
	},
	{
		"cedula": "474-6697328-0",
		"nombre": "Rhiannon",
		"apellido": "Logan",
		"direccion": "8717 Commodo St."
	},
	{
		"cedula": "690-9815493-3",
		"nombre": "Darius",
		"apellido": "Obrien",
		"direccion": "P.O. Box 751, 6210 Fusce Rd."
	},
	{
		"cedula": "478-2712451-9",
		"nombre": "Timon",
		"apellido": "Sandoval",
		"direccion": "4517 Elementum St."
	},
	{
		"cedula": "380-8705500-8",
		"nombre": "Isaac",
		"apellido": "Sutton",
		"direccion": "P.O. Box 498, 1789 Non, Street"
	},
	{
		"cedula": "661-4416361-2",
		"nombre": "Winifred",
		"apellido": "Arnold",
		"direccion": "8675 Curae; Avenue"
	},
	{
		"cedula": "345-7033681-1",
		"nombre": "Jael",
		"apellido": "Foreman",
		"direccion": "P.O. Box 434, 5461 Et, St."
	},
	{
		"cedula": "572-6387356-5",
		"nombre": "Zia",
		"apellido": "Pierce",
		"direccion": "8282 Mus. Rd."
	},
	{
		"cedula": "279-6469044-6",
		"nombre": "Rhonda",
		"apellido": "Potter",
		"direccion": "Ap #361-2611 Urna St."
	},
	{
		"cedula": "971-1098951-5",
		"nombre": "Malcolm",
		"apellido": "Brewer",
		"direccion": "Ap #564-775 Class St."
	},
	{
		"cedula": "962-8980048-9",
		"nombre": "Hedy",
		"apellido": "Palmer",
		"direccion": "7524 Ac Rd."
	},
	{
		"cedula": "341-6984833-6",
		"nombre": "Carissa",
		"apellido": "Huber",
		"direccion": "P.O. Box 614, 7834 Ac St."
	},
	{
		"cedula": "106-7410564-1",
		"nombre": "Quinlan",
		"apellido": "James",
		"direccion": "Ap #953-640 At, Rd."
	},
	{
		"cedula": "138-0988747-8",
		"nombre": "Hamish",
		"apellido": "Moses",
		"direccion": "Ap #651-2767 A, Av."
	},
	{
		"cedula": "647-1909324-0",
		"nombre": "Cherokee",
		"apellido": "Cunningham",
		"direccion": "P.O. Box 744, 3985 Blandit Rd."
	},
	{
		"cedula": "699-3612893-6",
		"nombre": "Rhiannon",
		"apellido": "Kirk",
		"direccion": "Ap #628-6230 Nulla Street"
	},
	{
		"cedula": "136-4402148-7",
		"nombre": "Barry",
		"apellido": "Peterson",
		"direccion": "500-3740 Vitae St."
	},
	{
		"cedula": "397-3355618-1",
		"nombre": "Charles",
		"apellido": "Dejesus",
		"direccion": "Ap #966-1023 Mus. Rd."
	},
	{
		"cedula": "750-2299367-4",
		"nombre": "Rose",
		"apellido": "Joyner",
		"direccion": "542-2981 Magna. Av."
	},
	{
		"cedula": "274-0149091-1",
		"nombre": "Kristen",
		"apellido": "Zamora",
		"direccion": "Ap #890-4714 Faucibus Street"
	},
	{
		"cedula": "171-0776416-1",
		"nombre": "Mari",
		"apellido": "Gordon",
		"direccion": "Ap #724-6834 Nisi. St."
	},
	{
		"cedula": "997-0029825-8",
		"nombre": "Lana",
		"apellido": "Lyons",
		"direccion": "9502 Rhoncus. Rd."
	},
	{
		"cedula": "504-7725412-4",
		"nombre": "Isabella",
		"apellido": "Best",
		"direccion": "Ap #765-3704 Mauris. Ave"
	},
	{
		"cedula": "927-6955288-0",
		"nombre": "Damon",
		"apellido": "Freeman",
		"direccion": "6226 Facilisis St."
	},
	{
		"cedula": "556-5658492-0",
		"nombre": "Cruz",
		"apellido": "Walton",
		"direccion": "742-1889 Purus. St."
	},
	{
		"cedula": "118-2723154-6",
		"nombre": "Hanna",
		"apellido": "Vincent",
		"direccion": "834-9517 Risus. St."
	}
];
        let viewModel = {
            login: {
                usuario: ko.observable(""),
                password: ko.observable("")
            },
            iniciarSesion() {
                let seDebeIniciar = viewModel.login.usuario() === "JuanPerez" && viewModel.login.password() === "123456";
                viewModel.sesionIniciada( seDebeIniciar );
                viewModel.errorIniciandoSesion( !seDebeIniciar );
            },
            pestaniaActiva: ko.observable( "listado" ),
            pestaniaActivaEsListado: function(){
                return viewModel.pestaniaActiva( "listado" );
            },
            pestaniaActivaEsRegistro: function(){
                return viewModel.pestaniaActiva( "registro" );
            },
            sesionIniciada: ko.observable(false),
            errorIniciandoSesion: ko.observable(false),
            clientes: ko.observableArray(),
            clienteActual: {
                cedula: ko.observable(),
                nombre: ko.observable(),
                apellido: ko.observable(),
                direccion: ko.observable()
            },
            clienteExiste: ko.observable(false),
            agregarDatos: function(){
                let clienteActual = viewModel.clienteActual;
                let arregloClientes = viewModel.clientes;
                let clienteExiste = arregloClientes().some( 
                    function existe( cliente ) { 
                        return cliente.cedula() == clienteActual.cedula() 
                    } 
                );

                viewModel.clienteExiste( clienteExiste );

                if( !clienteExiste ) {
                    viewModel.clientes.push({
                        cedula: ko.observable( clienteActual.cedula() ),
                        nombre: ko.observable( clienteActual.nombre() ),
                        apellido: ko.observable( clienteActual.apellido() ),
                        direccion: ko.observable( clienteActual.direccion() ),
                        seEstaEditando: ko.observable(false),
                        editar: function(){
                            this.seEstaEditando( !this.seEstaEditando() );
                        },
                        eliminar: function( cliente ) {
                            viewModel.clientes.remove(cliente);
                        }
                    });

                    clienteActual.cedula("");
                    clienteActual.nombre("");
                    clienteActual.apellido("");
                    clienteActual.direccion("");

                    viewModel.pestaniaActiva("listado");
                }
            },

        }
        
        for (let indice = 0; indice < datos.length; indice++) {
            const clienteActual = datos[indice];
            
            viewModel.clientes.push( {
                    cedula: ko.observable( clienteActual.cedula ),
                    nombre: ko.observable( clienteActual.nombre ),
                    apellido: ko.observable( clienteActual.apellido),
                    direccion: ko.observable( clienteActual.direccion ),
                    seEstaEditando: ko.observable(false),
                    editar: function(){
                        this.seEstaEditando( !this.seEstaEditando() );
                    },
                    eliminar: function( cliente ) {
                        viewModel.clientes.remove(cliente);
                    }
                }
            );
        }

        window.onload = function(){
            ko.applyBindings(viewModel);
        };
    </script>

    <style>
        #tabla-clientes td:last-child{
            width: 115px;
        }

        .jumbotron {
            background-color: rgba(0,0,0,0.2) !important;
            color: white;
        }

        /* Made with love by Mutiullah Samim*/

@import url('https://fonts.googleapis.com/css?family=Numans');

html,body{
    background-image: url('https://getwallpapers.com/wallpaper/full/8/e/2/573249.jpg');
    background-size: cover;
    background-repeat: no-repeat;
    background-attachment: fixed;
    height: 100%;
    font-family: 'Numans', sans-serif;
}

.container{
    height: 100%;
    align-content: center;
}

.d-flex .card{
    height: 370px;
    margin-top: auto;
    margin-bottom: auto;
    width: 400px;
    background-color: rgba(0,0,0,0.5) !important;
}

.social_icon span{
    font-size: 60px;
    margin-left: 10px;
    color: #FFC312;
}

.social_icon span:hover{
    color: white;
    cursor: pointer;
}

.card-header h3{
    color: white;
}

.social_icon{
    position: absolute;
    right: 20px;
    top: -45px;
}

.input-group-prepend span{
    width: 50px;
    background-color: #FFC312;
    color: black;
    border:0 !important;
}

input:focus{
    outline: 0 0 0 0  !important;
    box-shadow: 0 0 0 0 !important;

}

.remember{
    color: white;
}

.remember input
{
    width: 20px;
    height: 20px;
    margin-left: 15px;
    margin-right: 5px;
}

.login_btn{
    color: black;
    background-color: #FFC312;
    width: auto;
}

.login_btn:hover{
    color: black;
    background-color: white;
}

.links{
    color: white;
}

.links a{
    margin-left: 4px;
}
    </style>
</head>
<body>
    <div class="container">
<div class="jumbotron">
    <h1>Página de Prueba de Ingenieria de Software II</h1>
</div>
<div data-bind="visible: errorIniciandoSesion" class="alert alert-danger fade show" role="alert">
    <strong>Credenciales no válidos!</strong> Verifique sus datos e intente de nuevo.
</div>

<div data-bind="visible: clienteExiste" class="alert alert-danger fade show" role="alert">
    <strong>Ya existe un cliente con ese número de cédula!</strong>
</div>



<!-- ko ifnot: sesionIniciada -->
<div class="d-flex justify-content-center">
    <div class="card">
        <div class="card-header">
            <h3>Iniciar Sesión</h3>
            <div class="d-flex justify-content-end social_icon">
                <span class="fab fa-facebook-square"></span>
                <span class="fab fa-instagram-square"></span>
                <span class="fab fa-twitter-square"></span>
            </div>
        </div>
        <div class="card-body">
            <form>
                <div class="input-group form-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text"><i class="fas fa-user"></i></span>
                    </div>
                    <input id="usuario" data-bind="value: login.usuario" type="text" class="form-control" placeholder="Nombre de Usuario">
                    
                </div>
                <div class="input-group form-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text"><i class="fas fa-key"></i></span>
                    </div>
                    <input id="password" data-bind="value: login.password" type="password" class="form-control" placeholder="Password">
                </div>
                <div class="row align-items-center remember">
                    <input type="checkbox">Recordarme
                </div>
                <div class="form-group">
                    <input id="botonIniciarSesion" data-bind="click: iniciarSesion" type="submit" value="Iniciar Sesión" class="btn float-right login_btn">
                </div>
            </form>
        </div>
        <div class="card-footer">
            <div class="d-flex justify-content-center links">
                No tienes una cuenta?<a href="#">Regístrate</a>
            </div>
            <div class="d-flex justify-content-center">
                <a href="#">Olvidaste tu password?</a>
            </div>
        </div>
    </div>
</div>
<!-- /ko -->

<!-- ko if: sesionIniciada -->
<div class="card">
    <div class="card-header"><h1>Informacion Sobre Clientes</h1></div>
    <div class="card-body">
        <ul class="nav nav-tabs mb-4">
            <li class="nav-item">
                <a class="nav-link" data-bind="click: pestaniaActivaEsListado, css: {active: pestaniaActiva() === 'listado'}" href="#">Listado de Clientes</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bind="click: pestaniaActivaEsRegistro, css: {active: pestaniaActiva() === 'registro'}" href="#">Registro de Clientes</a>
            </li>
        </ul>
          <div id="contenedor-datos-de-clientes" data-bind="visible: pestaniaActiva() === 'listado'">
            <table id="tabla-clientes" class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th colspan="4" class="text-center">Datos</th>
                </tr>
                <tr>
                    <th>Cedula</th>
                    <th>Nombre</th>
                    <th>Apellido</th>
                    <th>Direccion</th>
                </tr>
            </thead>
            <tbody data-bind="foreach: clientes">
                <tr>
                    <td>
                        <span data-bind="text: cedula, visible: !seEstaEditando()"></span>
                        <input class="form-control" type="text" data-bind="value: cedula, visible: seEstaEditando"></input>
                    </td>
                    <td>
                        <span data-bind="text: nombre, visible: !seEstaEditando()"></span>
                        <input class="form-control" type="text" data-bind="value: nombre, visible: seEstaEditando"></input>
                    </td>
                    <td>
                        <span data-bind="text: apellido, visible: !seEstaEditando()"></span>
                        <input class="form-control" type="text" data-bind="value: apellido, visible: seEstaEditando"></input>
                    </td>
                    <td>
                        <span data-bind="text: direccion, visible: !seEstaEditando()"></span>
                        <input class="form-control" type="text" data-bind="value: direccion, visible: seEstaEditando"></input>
                    </td>
                    <td>
                        <button class="btn" data-bind="click: editar, css:{ 'btn-warning': seEstaEditando, 'btn-success': !seEstaEditando()} ">
                            <span class="fas fa-edit"></span>
                        </button>
                        <button class="btn btn-danger" data-bind="click: eliminar">
                            <span class="fas fa-times"></span>
                        </button>
                    </td>
                </tr>
            </tbody>
            </table>
        </div>
        <div id="contenedor-formulario-de-clientes" data-bind="visible: pestaniaActiva() === 'registro'">
            <form>
                <!-- ko with: clienteActual-->
                <div class="form-group">
                    <label for="txtCedula">Cedula:</label>
                    <input class="form-control" data-bind="value: cedula" type="text" id="txtCedula">
                </div>
                <div class="form-group">
                    <label for="txtNombre">Nombre:</label>
                    <input class="form-control" data-bind="value: nombre" type="text" id="txtNombre">
                </div>
                <div class="form-group">
                    <label for="txtApellido">Apellido:</label>
                    <input class="form-control" data-bind="value: apellido" type="text" id="txtApellido">
                </div>
                <div class="form-group">
                    <label for="txtDireccion">Direccion:</label>
                    <input class="form-control" data-bind="value: direccion" type="text" id="txtDireccion">
                </div>
                <!-- /ko -->
                <input id="agrega" data-bind="click: agregarDatos" class="btn btn-primary" type="submit" value="Agregar">
            </form>
        </div>
    </div>
</div>
<!-- /ko -->
</div>
</body>
</html>
